<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
</head>
<body>
<div style="margin-bottom:30px;margin-top:30px;">
  <table border="1">
    <tr>
      <td onclick="location.href='/kr'">한국 시간</td>
      <td onclick="location.href='/de'">덴마크 시간</td>
      <td onclick="location.href='/hk'">홍콩 시간</td>
      <td onclick="location.href='/nz'">뉴질랜드 시간</td>
      <td onclick="location.href='/us'">미국 중부 시간</td>
      <td onclick="location.href='/jp'">일본 시간</td>
    </tr>
  </table>
</div>
<table id="table" border="1" style="width:500px;height:500px;text-align:center;font-size:50px;font-weight:700;color:rgb(227 227 227);">
  <tr>
    <td id="x_0_y_0">한</td>
    <td id="x_0_y_1">두</td>
    <td id="x_0_y_2">세</td>
    <td id="x_0_y_3">네</td>
    <td id="x_0_y_4">다</td>
    <td id="x_0_y_5">섯</td>
  </tr>
  <tr>
    <td id="x_1_y_0">여</td>
    <td id="x_1_y_1">섯</td>
    <td id="x_1_y_2">일</td>
    <td id="x_1_y_3">곱</td>
    <td id="x_1_y_4">여</td>
    <td id="x_1_y_5">덟</td>
  </tr>
  <tr>
    <td id="x_2_y_0">아</td>
    <td id="x_2_y_1">홉</td>
    <td id="x_2_y_2">열</td>
    <td id="x_2_y_3">한</td>
    <td id="x_2_y_4">두</td>
    <td id="x_2_y_5">시</td>
  </tr>
  <tr>
    <td id="x_3_y_0">자</td>
    <td id="x_3_y_1">이</td>
    <td id="x_3_y_2">삼</td>
    <td id="x_3_y_3">사</td>
    <td id="x_3_y_4">오</td>
    <td id="x_3_y_5">십</td>
  </tr>
  <tr>
    <td id="x_4_y_0">정</td>
    <td id="x_4_y_1">일</td>
    <td id="x_4_y_2">이</td>
    <td id="x_4_y_3">삼</td>
    <td id="x_4_y_4">사</td>
    <td id="x_4_y_5">육</td>
  </tr>
  <tr>
    <td id="x_5_y_0">오</td>
    <td id="x_5_y_1">오</td>
    <td id="x_5_y_2">칠</td>
    <td id="x_5_y_3">팔</td>
    <td id="x_5_y_4">구</td>
    <td id="x_5_y_5">분</td>
  </tr>
</table>
</body>
<script language="JavaScript">
  let jsonSave = null;

  setInterval( () => {
    updates();
  },1000);

  const updates = async() => {
    fetchPoint()
      .then((json) => {
        for(var i in jsonSave){
          let isEq =false;
          for(var j in json){
            if( jsonSave[i].x == json[j].x &&
                jsonSave[i].y == json[j].y){
                  isEq = true;
                  break;
            }
          }
          if(!isEq){
            findIndex(jsonSave[i].x,jsonSave[i].y)
              .style.color = 'rgb(227 227 227)';
          }
        }

        for(var i in json){
          findIndex(json[i].x,json[i].y)
            .style.color = 'rgb(65 237 245)';
        }
        jsonSave = json;
      });
  }

  function findIndex(x,y){
    return document.getElementById("x_"+ x +"_y_"+ y);
  }


  async function fetchPoint() {
    var url =  document.location.href;
    var array = url.split('/');
    var lastsegment = array[array.length-1];

    const point = await fetch(lastsegment+ "/api");
    return point.json();
  }

</script>
</html>